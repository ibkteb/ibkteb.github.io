import{s as P,c as q,a as C,f as S,r as z,b as o,p as I,o as B,g as G,d as R,e as j,i as N,h as O,l as U,j as V,k as _,m as H,n as J}from"./indicator-CMPx_ztt.js";const D=document.getElementById("syllableTable"),x=document.getElementById("fullTable"),L=document.getElementById("tooltip"),K=L.querySelector(".tooltip-title"),v=L.querySelector(".tooltip-content"),Q=document.getElementById("search");async function X(){N(),O(),Y(),ee(),await Promise.all([U(),V(),_()])}document.addEventListener("syllablesLoaded",()=>{te(),ne(),b&&W(),F()});document.addEventListener("DOMContentLoaded",X);function Y(){const n=document.getElementById("themeToggle");n&&n.addEventListener("click",()=>{const e=document.documentElement.getAttribute("data-theme")==="light"?"dark":"light";document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e)}),localStorage.getItem("theme")==="light"&&document.documentElement.setAttribute("data-theme","light")}function ee(){const n=document.getElementById("scriptSimp"),e=document.getElementById("scriptTrad");n&&e&&(n.addEventListener("click",()=>{H(!1),w()}),e.addEventListener("click",()=>{H(!0),w()}),w())}function w(){const n=J(),e=document.getElementById("scriptSimp"),t=document.getElementById("scriptTrad");e&&t&&(n?(e.classList.remove("active"),t.classList.add("active")):(e.classList.add("active"),t.classList.remove("active"))),document.querySelectorAll(".tab-cn").forEach((r,i)=>{const a=["éŸµæ¯è¡¨","éŸ³èŠ‚å…¨è¡¨","å­—å…¸"],d=["éŸ»æ¯è¡¨","éŸ³ç¯€å…¨è¡¨","å­—å…¸"];i<a.length&&(r.textContent=n?d[i]:a[i])});const s=document.getElementById("pageTitle");s&&(s.textContent.includes("æ±‰è¯­æ‹¼éŸ³éŸ³èŠ‚è¡¨")||s.textContent.includes("æ¼¢èªæ‹¼éŸ³éŸ³ç¯€è¡¨"))&&(s.textContent=n?"æ¼¢èªæ‹¼éŸ³éŸ³ç¯€è¡¨":"æ±‰è¯­æ‹¼éŸ³éŸ³èŠ‚è¡¨")}function te(){const n=["âˆ…","âˆ…","/i/","/u/","/n/","/Å‹/","âˆ…","/i/","/u/","/n/","/Å‹/","âˆ…","?","âˆ…","âˆ…"];let e="<thead>";e+='<tr><th rowspan="2" class="row-header">Medial</th>',e+='<th colspan="1" class="nucleus-group">âˆ…</th>',e+='<th colspan="5" class="nucleus-group nucleus-e">/É™/</th>',e+='<th colspan="5" class="nucleus-group nucleus-a">/a/</th>',e+='<th colspan="4" class="nucleus-group">other</th>',e+="</tr><tr>",n.forEach((t,s)=>{e+=`<th class="sub-header${s===1||s===6||s===11?" nucleus-divider":""}">${t}</th>`}),e+="</tr></thead><tbody>",P.rows.forEach((t,s)=>{e+="<tr>",e+=`<th class="row-header medial-header" style="text-align:center;">${t.medial}</th>`;const r=["âˆ…","âˆ…","i","u","n","Å‹","âˆ…","i","u","n","Å‹","âˆ…","?","âˆ…","âˆ…"];t.cells.forEach((i,a)=>{var h,u;let d=a===1||a===6||a===11?" nucleus-divider":"";if(i){let l="âˆ…";a>=1&&a<=5?l="É™":a>=6&&a<=10?l="a":a===11?l="É¨":a===12?l="Éš":a===13?l="e":a===14&&(l="o");const f=r[a]||"âˆ…",$=`${t.medial.replace(/\//g,"")}-${l}-${f}`,g=(u=(h=i.pinyin)==null?void 0:h.split("/")[0])==null?void 0:u.replace(/[*-]/g,"").trim(),p=i.note==="rare",c=q(g,g,o.pinyinToTongyong),y=C(g,g,o.pinyinToWadeGiles);e+=`<td class="${d}${p?" rare":""}" data-ipa="${i.ipa||""}" data-pinyin="${i.pinyin||""}" data-zhuyin="${i.zhuyin||""}" data-row="${s}" data-col="${a}">
                    <div class="cell-content"><span class="cell-structure">${$}</span><span class="cell-pinyin">${i.pinyin||""}</span><span class="cell-tongyong">${c}</span><span class="cell-wg">${y}</span><span class="cell-zhuyin">${(i.zhuyin||"").replace(/[ËŠË‡Ë‹Ë™]/g,"")}</span><span class="cell-ipa">${i.ipa||""}</span></div></td>`}else e+=`<td class="empty${d}"></td>`}),e+="</tr>"}),e+="</tbody>",D.innerHTML=e,Z(D)}function ne(){let n="<thead><tr><th>Medial</th><th>Vowel</th><th>Coda</th><th>Rhyme</th>";S.onsets.forEach(t=>{const s=B[t]||"âˆ…",i={"âˆ…":"",b:"ã„…",p:"ã„†",m:"ã„‡",f:"ã„ˆ",d:"ã„‰",t:"ã„Š",n:"ã„‹",l:"ã„Œ",g:"ã„",k:"ã„",h:"ã„",j:"ã„",q:"ã„‘",x:"ã„’",zh:"ã„“",ch:"ã„”",sh:"ã„•",r:"ã„–",z:"ã„—",c:"ã„˜",s:"ã„™"}[t]||"";n+=`<th class="onset-header"><div class="cell-content" style="flex-direction:column;"><span class="cell-structure" style="color:white;">${s}</span><span class="cell-pinyin" style="color:white;">${t}</span><span class="cell-zhuyin" style="color:white;">${i}</span></div></th>`}),n+="</tr></thead><tbody>";let e=null;S.rows.forEach((t,s)=>{let r="";e!==null&&e!==t.medial&&(t.medial==="w"?r="medial-divider-w":t.medial==="j"?r="medial-divider-j":t.medial==="É¥"&&(r="medial-divider-y")),e=t.medial;const i=`${t.medial}-${t.vowel}-${t.coda}`,a=z[t.rhyme]||t.rhyme,d=(o.pinyinToZhuyinMap[t.rhyme]||I(a,a,o.pinyinToZhuyinMap)).replace(/[ËŠË‡Ë‹Ë™]/g,""),h=C(a,a,o.pinyinToWadeGiles).replace(/<sup>\d<\/sup>/g,""),u=q(a,a,o.pinyinToTongyong);n+=`<tr class="${r}"><td class="ipa-cell" data-medial="${t.medial}">${t.medial}</td><td class="ipa-cell">${t.vowel}</td><td class="ipa-cell">${t.coda}</td>`,n+=`<td class="rhyme-cell clickable" data-pinyin="${t.rhyme}" data-zhuyin="${d}"><div class="cell-content" style="flex-direction:column;"><span class="cell-structure">${i}</span><span class="cell-pinyin">${t.rhyme}</span><span class="cell-tongyong">${u}</span><span class="cell-wg">${h}</span><span class="cell-zhuyin">${d}</span><span class="cell-ipa">${t.ipa}</span></div></td>`,t.cells.forEach((l,f)=>{var $;if(l){const g=S.onsets[f],p=o.rareSyllables.has(l),y=`${(($=B[g])==null?void 0:$.replace(/\//g,""))||"âˆ…"}-${t.medial}-${t.vowel}-${t.coda}`,T=I(l,l,o.pinyinToZhuyinMap).replace(/[ËŠË‡Ë‹Ë™]/g,""),m=C(l,l,o.pinyinToWadeGiles).replace(/<sup>\d<\/sup>/g,""),E=q(l,l,o.pinyinToTongyong);n+=`<td class="${p?"rare":""}" data-pinyin="${l}" data-onset="${g}" data-rhyme="${t.rhyme}" data-ipa="${t.ipa}" data-medial="${t.medial}">
                    <div class="cell-content"><span class="cell-structure">${y}</span><span class="cell-pinyin">${l}</span><span class="cell-tongyong">${E}</span><span class="cell-wg">${m}</span><span class="cell-zhuyin">${T}</span></div></td>`}else n+='<td class="empty"></td>'}),n+="</tr>"}),n+="</tbody>",x.innerHTML=n,Z(x)}function Z(n){n.querySelectorAll("td:not(.empty):not(.ipa-cell)").forEach(e=>{e.addEventListener("click",ae),e.addEventListener("mouseenter",se),e.addEventListener("mouseleave",ie)})}function ae(n){const e=n.currentTarget,t=e.dataset.pinyin;if(!t)return;e.classList.add("playing"),setTimeout(()=>e.classList.remove("playing"),400);let s=t.split("/")[0].replace(/[*-]/g,"").trim();z[s]&&(s=z[s]);const r=G(s),i=R.characterData.find(u=>u.char===r);let a,d,h;i?(a=r,d=i.pinyin,h=i.zhuyin):(h=I(s,s,o.pinyinToZhuyinMap),a=h||s,d=s),j(a,d,i?h:"")}let A;function se(n){var g;const e=n.currentTarget,t=e.dataset.pinyin;if(!t)return;const s=e.dataset.onset||"",r=e.dataset.rhyme||"";let i="";if(s){const p=((g=B[s])==null?void 0:g.replace(/\//g,""))||"âˆ…",c=S.rows.find(y=>y.rhyme===r);if(c){const y=c.medial==="âˆ…"?"âˆ…":c.medial,T=c.vowel==="âˆ…"?"âˆ…":c.vowel,m=c.coda==="âˆ…"?"âˆ…":c.coda;i=`${p}-${y}-${T}-${m}`}}else{const p=parseInt(e.dataset.row),c=parseInt(e.dataset.col);if(!isNaN(p)&&P.rows[p]){const y=P.rows[p].medial.replace(/\//g,""),T=["âˆ…","âˆ…","/i/","/u/","/n/","/Å‹/","âˆ…","/i/","/u/","/n/","/Å‹/","âˆ…","?","âˆ…","âˆ…"];let m="âˆ…";c>=1&&c<=5?m="É™":c>=6&&c<=10?m="a":c===11?m="É¨":c===12?m="Éš":c===13?m="e":c===14&&(m="o");const E=T[c]?T[c].replace(/\//g,""):"âˆ…";i=`${y}-${m}-${E}`}}K.textContent=t.split("/")[0].replace(/[*-]/g,"").trim(),v.innerHTML="",i&&(v.innerHTML+=`<div><strong>Structure:</strong> <span style="font-family:monospace;color:var(--accent-primary);">${i}</span></div>`),v.innerHTML+=`<div><strong>Pinyin:</strong> ${t}</div>`;const a=t.split("/")[0].replace(/[*-]/g,"").trim();o.pinyinToTongyong[a]&&(v.innerHTML+=`<div><strong>Tongyong:</strong> ${q(a,a,o.pinyinToTongyong)}</div>`),o.pinyinToWadeGiles[a]&&(v.innerHTML+=`<div><strong>Wade-Giles:</strong> ${C(a,a,o.pinyinToWadeGiles)}</div>`);let u=e.dataset.zhuyin||"";if(s&&!u&&(u=I(a,a,o.pinyinToZhuyinMap)),u&&(v.innerHTML+=`<div><strong>Zhuyin:</strong> ${u}</div>`),s){const p=o.freqData[a];if(p!==void 0){const y=Object.values(o.freqData).sort((m,E)=>E-m).indexOf(p)+1,T=y===1?"st":y===2?"nd":y===3?"rd":"th";v.innerHTML+=`<div><strong>Frequency:</strong> ${y}${T} (${p.toLocaleString()} per million)</div>`}}if(o.neologismSyllables.has(a)&&(v.innerHTML+='<div style="color:#f59e0b;margin-top:0.5rem;">ğŸ†• <strong>Neologism</strong> â€” recently coined syllable</div>'),o.dialecticalSyllables[a]){const p=o.dialecticalSyllables[a];v.innerHTML+=`<div style="color:#f97316;margin-top:0.5rem;">ğŸ—£ï¸ <strong>Dialectical</strong> â€” ${p}</div>`}const l=e.getBoundingClientRect();let f=l.right+10,$=l.top;f+280>window.innerWidth&&(f=l.left-290),$+150>window.innerHeight&&($=window.innerHeight-160),L.style.left=f+"px",L.style.top=$+"px",clearTimeout(A),A=setTimeout(()=>L.classList.add("visible"),150)}function ie(){clearTimeout(A),L.classList.remove("visible")}let M=[],k={},b=!1;function W(){M=Object.entries(o.freqData).filter(([n,e])=>e>0).sort((n,e)=>e[1]-n[1]),k={},M.forEach(([n,e],t)=>{k[n]=t+1})}function le(n,e){if(e===0||e===void 0)return"transparent";const t=k[n];if(!t)return"transparent";const s=M.length,r=1/Math.pow(t,.4),i=1/Math.pow(1,.4),a=1/Math.pow(s,.4),d=(r-a)/(i-a),h=250-d*30,u=50+d*40,l=70-d*35,f=.3+d*.5;return`hsla(${h}, ${u}%, ${l}%, ${f})`}document.getElementById("freqToggle").addEventListener("click",function(){b=!b,this.classList.toggle("active",b),b&&M.length===0&&W(),F()});function F(){x.querySelectorAll("td:not(.empty):not(.ipa-cell):not(.rhyme-cell)").forEach(n=>{const e=n.dataset.pinyin,t=o.freqData[e];if(b&&t!==void 0){n.style.backgroundColor=le(e,t);const s=k[e]||"?";n.title=`${e}: #${s} (${t.toLocaleString()}/M) â€” Zipf: freq âˆ 1/rank`}else n.style.backgroundColor="",n.title=""})}document.querySelectorAll(".toggle-btn").forEach(n=>{n.addEventListener("click",()=>{n.id!=="freqToggle"&&(n.classList.toggle("active"),document.body.classList.toggle(`show-${n.dataset.toggle}`))})});document.querySelectorAll(".tab-btn").forEach(n=>{n.tagName!=="A"&&n.addEventListener("click",()=>{document.querySelectorAll(".tab-btn").forEach(e=>e.classList.remove("active")),document.querySelectorAll(".tab-content").forEach(e=>e.classList.remove("active")),n.classList.add("active"),document.getElementById("tab-"+n.dataset.tab).classList.add("active")})});Q.addEventListener("input",n=>{const e=n.target.value.toLowerCase().trim();document.querySelectorAll("#syllableTable td:not(.empty), #fullTable td:not(.empty):not(.ipa-cell):not(.rhyme-cell)").forEach(t=>{const s=!e||(t.dataset.ipa||"").toLowerCase().includes(e)||(t.dataset.pinyin||"").toLowerCase().includes(e)||(t.dataset.zhuyin||"").includes(e);t.style.opacity=s?"1":"0.25",t.classList.toggle("highlighted",e&&s)})});
